<!DOCTYPE html>
<html>
    <head>
        <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
        <meta content="utf-8" http-equiv="encoding">

        <link rel="icon" type="image/x-icon" href="/favicon.ico">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">
        <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
        <title>Scient'IF'ique</title> 
    </head>
    <body>

        <!-- Barre de navigation -->
        <div class="container-fluid mx-0 px-0">
            <nav class="navbar navbar-expand-lg navbar-light bg-light px-3">
                <a class="navbar-brand" href="">Scient'IF'ique</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item active">
                    <a class="nav-link" href="index.html">Accueil</a>
                    </li>
                    <li class="nav-item">
                    <a class="nav-link" href="#"><i class="bi bi-trophy-fill"></i> Top 10 des scientifiques</a>
                    </li>
                    <li class="nav-item">
                    <a class="nav-link" href="#"><i class="bi bi-dice-5-fill"></i> Au hasard</a>
                </ul>
                </div>
                
            </nav>

            <div class="container mt-5">
                <div class="row justify-content-center mb-5">
                    <div class="col-3 justify-content-center">
                        <form action="#" method="get">
                            <div class="input-group">
                                <input type="text" id="mot_cle" name="mot_cle" class="form-control" placeholder="Isaac..." aria-label="Nom de scientifique" >
                                <button id="bouton-recherche" class="btn btn-outline-secondary" onclick="lancerRecherche()" type="submit"><i class="bi bi-search"></i></button>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="row">
                    <table class="table" id="resultats">

                    </table>
                </div>
                <!-- Résultats de la requête -->
                <div id="zone-resultats-recherche" class="row row-cols-1 row-cols-md-3 row-cols-lg-4 row-cols-sm-2 row-cols-xl-5 g-4">
                    
                  </div>
                
            </div>

            
        </div>

        <script>
            $("#mot_cle").keyup(function(event){
                if(event.keyCode == 13){
                    $("#bouton-recherche").click();
                }
            });
            function activerCollapsibleTexts() {
                // Configure/customize these variables.
                var showChar = 100;  // How many characters are shown by default
                var ellipsestext = "...";
                var moretext = "Voir plus >";
                var lesstext = "Voir moins";


                $('.more').each(function() {
                    var content = $(this).html();

                    if(content.length > showChar) {

                        var c = content.substr(0, showChar);
                        var h = content.substr(showChar, content.length - showChar);

                        var html = c + '<span class="moreellipses">' + ellipsestext+ '&nbsp;</span><span class="morecontent"><span style="display: none;">' + h + '</span>&nbsp;&nbsp;<a href="" class="morelink">' + moretext + '</a></span>';

                        $(this).html(html);
                    }

                });

                $(".morelink").click(function(){
                    if($(this).hasClass("less")) {
                        $(this).removeClass("less");
                        $(this).html(moretext);
                    } else {
                        $(this).addClass("less");
                        $(this).html(lesstext);
                    }
                    $(this).parent().prev().toggle();
                    $(this).prev().toggle();
                    return false;
                });
            }

            function lancerRecherche() {
                rechercher(document.getElementById('mot_cle').value);
            }

            $(document).ready(function() {
                let paramString = window.location.href.split('?')[1];
                let queryString = new URLSearchParams(paramString);

                let mot_cle = queryString.get("mot_cle");
                if(mot_cle != undefined) {
                    mot_cle = mot_cle.replace("#", "");
                    $("#mot_cle").val(mot_cle);
                    lancerRecherche();
                }  
            });
        </script>
        <script type="text/javascript" src="fonctions.js"></script>
    </body>
</html>
